"use strict";angular.module("smkApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ui.bootstrap","angular-loading-bar"]).constant("_",window._).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",reloadOnSearch:!1}).otherwise({redirectTo:"/"})}]),angular.module("smkApp").controller("MainCtrl",["$scope","$location","Solr","Query",function(a,b,c,d){a.term=b.search().q,a.currentTerm="",a.pager={total:0,perPage:50,current:b.search().p},a.results=[],a.toggleAdvanced=!1,a.search=function(e,f){e=e||{},f=f||Function,e.rows=a.pager.perPage,a.term?c.query(new d(a.term,!1,e),function(c){f(),b.search("q",a.term),b.search("p",a.pager.current),a.results=c.response.docs,a.pager.total=c.response.numFound,a.currentTerm=a.term}):(b.search("q",null),b.search("p",null),a.results=[],a.pager.total=0,a.currentTerm="")},a.performSearch=function(){a.search({start:0},function(){a.pager.current=1})},a.changePage=function(){a.search({start:(a.pager.current-1)*a.pager.perPage})},a.term&&a.changePage()}]),angular.module("smkApp").service("Solr",["$resource",function(a){var b="http://solr.smk.dk:8080/solr/prod_all_dk";return a(b+"/select",{indent:"on",wt:"json","json.wrf":"JSON_CALLBACK"},{query:{method:"JSONP"}})}]),angular.module("smkApp").factory("Query",["_",function(a){return function(b,c,d){if(a.isObject(b))return b;if(a.isString(b)){var e="",f=["artist_name","artist_natio","title_eng","title_dk","title_first","prod_technique_en","prod_technique_dk"];return a.isArray(c)||(c=f),a.isObject(d)||(d={}),a.forEach(c,function(a){e+=a+':"'+b+'" '}),a.merge({q:e},d)}throw new Error("The first argument must be either a term or a query object")}}]);